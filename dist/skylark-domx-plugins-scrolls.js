/**
 * skylark-domx-plugins-scrolls - The skylark scrolls plugins library for dom api extension
 * @author Hudaokeji, Inc.
 * @version v0.9.0
 * @link https://github.com/skylark-domx-plugins/skylark-domx-plugins-scrolls/
 * @license MIT
 */
!function(t,e){var s=e.define,require=e.require,l="function"==typeof s&&s.amd,o=!l&&"undefined"!=typeof exports;if(!l&&!s){var i={};s=e.define=function(t,e,s){"function"==typeof s?(i[t]={factory:s,deps:e.map(function(e){return function(t,e){if("."!==t[0])return t;var s=e.split("/"),l=t.split("/");s.pop();for(var o=0;o<l.length;o++)"."!=l[o]&&(".."==l[o]?s.pop():s.push(l[o]));return s.join("/")}(e,t)}),resolved:!1,exports:null},require(t)):i[t]={factory:null,resolved:!0,exports:s}},require=e.require=function(t){if(!i.hasOwnProperty(t))throw new Error("Module "+t+" has not been defined");var module=i[t];if(!module.resolved){var s=[];module.deps.forEach(function(t){s.push(require(t))}),module.exports=module.factory.apply(e,s)||null,module.resolved=!0}return module.exports}}if(!s)throw new Error("The module utility (ex: requirejs or skylark-utils) is not loaded!");if(function(t,require){t("skylark-domx-plugins-scrolls/scrolls",["skylark-domx-plugins-base/plugins"],function(t){"use strict";return t.scrolls={}}),t("skylark-domx-plugins-scrolls/affix",["skylark-langx/langx","skylark-domx-browser","skylark-domx-eventer","skylark-domx-noder","skylark-domx-geom","skylark-domx-query","skylark-domx-plugins-base","./scrolls"],function(t,e,s,l,o,i,r,n){"use strict";var a=r.Plugin.inherit({klassName:"Affix",pluginName:"lark.scrolls.affix",options:{offset:0,target:window},_construct:function(e,s){this.overrided(e,s),this.$target=i(this.options.target).on("scroll.affix.data-api",t.proxy(this.checkPosition,this)).on("click.affix.data-api",t.proxy(this.checkPositionWithEventLoop,this)),this.$element=this.$(),this.affixed=null,this.unpin=null,this.pinnedOffset=null,this.checkPosition()},getState:function(t,e,s,l){var o=this.$target.scrollTop(),i=this.$element.offset(),r=this.$target.height();if(null!=s&&"top"==this.affixed)return o<s&&"top";if("bottom"==this.affixed)return null!=s?!(o+this.unpin<=i.top)&&"bottom":!(o+r<=t-l)&&"bottom";var n=null==this.affixed,a=n?o:i.top,c=n?r:e;return null!=s&&o<=s?"top":null!=l&&a+c>=t-l&&"bottom"},getPinnedOffset:function(){if(this.pinnedOffset)return this.pinnedOffset;this.$element.removeClass(a.RESET).addClass("affix");var t=this.$target.scrollTop(),e=this.$element.offset();return this.pinnedOffset=e.top-t},checkPositionWithEventLoop:function(){setTimeout(t.proxy(this.checkPosition,this),1)},checkPosition:function(){if(this.$element.is(":visible")){var t=this.$element.height(),e=this.options.offset,l=e.top,o=e.bottom,r=Math.max(i(document).height(),i(document.body).height());"object"!=typeof e&&(o=l=e),"function"==typeof l&&(l=e.top(this.$element)),"function"==typeof o&&(o=e.bottom(this.$element));var n=this.getState(r,t,l,o);if(this.affixed!=n){null!=this.unpin&&this.$element.css("top","");var c="affix"+(n?"-"+n:""),h=s.create(c+".affix");if(this.$element.trigger(h),h.isDefaultPrevented())return;this.affixed=n,this.unpin="bottom"==n?this.getPinnedOffset():null,this.$element.removeClass(a.RESET).addClass(c).trigger(c.replace("affix","affixed")+".affix")}"bottom"==n&&this.$element.offset({top:r-t-o})}}});return a.RESET="affix affix-top affix-bottom",r.register(a),n.Affix=a}),t("skylark-domx-plugins-scrolls/auto-scroll",["skylark-langx","skylark-domx-browser","skylark-domx-eventer","skylark-domx-noder","skylark-domx-finder","skylark-domx-geom","skylark-domx-styler","skylark-domx-query","skylark-domx-plugins-base","./scrolls"],function(t,e,s,l,o,i,r,n,a,c){"use strict";var h=a.Plugin.inherit({klassName:"AutoScroll",pluginName:"lark.scrolls.autoscroll",options:{scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0},_construct:function(e,s){this.overrided(e,s),this.autoScrolls=[],this._autoScroll=t.debounce((t,s)=>{var n=this.options,a=n.scrollSensitivity,c=n.scrollSpeed,h=l.scrollingElement();this.scrollEl=o.scrollableParent(e,!0);var u=0,f=this.scrollEl,d=this.autoScrolls;do{var p,m,g,y,k,v,x,b,$,S=f,E=i.boundingRect(S),T=E.top,w=E.bottom,P=E.left,_=E.right,H=E.width,C=E.height;if(p=S.scrollWidth,m=S.scrollHeight,g=r.css(S),b=S.scrollLeft,$=S.scrollTop,S===h?(v=H<p&&("auto"===g.overflowX||"scroll"===g.overflowX||"visible"===g.overflowX),x=C<m&&("auto"===g.overflowY||"scroll"===g.overflowY||"visible"===g.overflowY)):(v=H<p&&("auto"===g.overflowX||"scroll"===g.overflowX),x=C<m&&("auto"===g.overflowY||"scroll"===g.overflowY)),y=v&&(Math.abs(_-t)<=a&&b+H<p)-(Math.abs(P-t)<=a&&!!b),k=x&&(Math.abs(w-s)<=a&&$+C<m)-(Math.abs(T-s)<=a&&!!$),!d[u])for(var M=0;M<=u;M++)d[M]||(d[M]={});d[u].vx==y&&d[u].vy==k&&d[u].el===S||(d[u].el=S,d[u].vx=y,d[u].vy=k,clearInterval(d[u].pid),!S||0==y&&0==k||(this.scrollThisInstance=!0,d[u].pid=setInterval(function(){var t=d[this.layer].vy?d[this.layer].vy*c:0,e=d[this.layer].vx?d[this.layer].vx*c:0;i.scrollBy(d[this.layer].el,e,t)}.bind({layer:u}),24))),u++}while(n.bubbleScroll&&f!==h&&(f=o.scrollableParent(f,!1)))},30)},destroy:function(){this._clearAutoScrolls(),this._cancelThrottle(),this._nulling()},handle:function(t,e){this._throttleTimeout=this._autoScroll(t,e)},_clearAutoScrolls:function(){this.autoScrolls.forEach(function(t){clearInterval(t.pid)}),this.autoScrolls=[]},_cancelThrottle:function(){this._throttleTimeout&&this._throttleTimeout.cancel&&(this._throttleTimeout.cancel(),this._throttleTimeout=void 0)},_nulling:function(){this.pointerElemChangedInterval=null,this.lastPointerElemX=null,this.lastPointerElemY=null,this.scrollEl=this.scrollParentEl=this.autoScrolls.length=null}});return a.register(h),c.AutoScroll=h}),t("skylark-domx-plugins-scrolls/infinite-scroll",["skylark-langx/langx","skylark-domx-browser","skylark-domx-eventer","skylark-domx-noder","skylark-domx-geom","skylark-domx-query","skylark-domx-plugins-base","./scrolls"],function(t,e,s,l,o,i,r,n){"use strict";var a=r.Plugin.inherit({klassName:"InfiniteScroll",pluginName:"lark.scrolls.infinitescroll",options:{dataSource:null,hybrid:!1,percentage:95},_construct:function(e,s){this.overrided(e,s),this.$element=this.$(),this.$element.addClass("infinitescroll"),this.curScrollTop=this.$element.scrollTop(),this.curPercentage=this.getPercentage(),this.fetchingData=!1,this.$element.on("scroll.domx.infinitescroll",t.proxy(this.onScroll,this)),this.onScroll()},destroy:function(){return this.$element.remove(),this.$element.empty(),this.$element[0].outerHTML},disable:function(){this.$element.off("scroll.domx.infinitescroll")},enable:function(){this.$element.on("scroll.domx.infinitescroll",t.proxy(this.onScroll,this))},end:function(t){var e=i('<div class="infinitescroll-end"></div>');t?e.append(t):e.append("---------"),this.$element.append(e),this.disable()},getPercentage:function(){var t="border-box"===this.$element.css("box-sizing")?this.$element.outerHeight():this.$element.height(),e=this.$element.get(0).scrollHeight;return e>t?t/(e-this.curScrollTop)*100:0},fetchData:function(t){var e,s=i('<div class="infinitescroll-load"></div>'),l=this,o=function(){var t={percentage:l.curPercentage,scrollTop:l.curScrollTop},e=i('<div class="loader"></div>');s.append(e),e.loader(),l.options.dataSource&&l.options.dataSource(t,function(t){var e;s.remove(),t.content&&l.$element.append(t.content),t.end&&(e=!0!==t.end?t.end:void 0,l.end(e)),l.fetchingData=!1})};this.fetchingData=!0,this.$element.append(s),this.options.hybrid&&!0!==t?(e=i('<button type="button" class="btn btn-primary"></button>'),"object"==typeof this.options.hybrid?e.append(this.options.hybrid.label):e.append('<span class="glyphicon glyphicon-repeat"></span>'),e.on("click.domx.infinitescroll",function(){e.remove(),o()}),s.append(e)):o()},onScroll:function(t){this.curScrollTop=this.$element.scrollTop(),this.curPercentage=this.getPercentage(),!this.fetchingData&&this.curPercentage>=this.options.percentage&&this.fetchData()}});return r.register(a),n.InfiniteScroll=a}),t("skylark-domx-plugins-scrolls/scrolling-element",["./scrolls"],function(t){return t.scrollingElement=function(){return document.scrollingElement||document.documentElement}}),t("skylark-domx-plugins-scrolls/scroll-spy",["skylark-langx/langx","skylark-domx-browser","skylark-domx-eventer","skylark-domx-noder","skylark-domx-geom","skylark-domx-query","skylark-domx-plugins-base","./scrolls"],function(t,e,s,l,o,i,r,n){"use strict";var a=r.Plugin.inherit({klassName:"ScrollSpy",pluginName:"lark.scrolls.scrollspy",options:{offset:10},_construct:function(e,s){this.overrided(e,s),this.$body=i(document.body),this.$scrollElement=this.$().is(document.body)?i(window):this.$(),this.selector=(this.options.target||"")+" .nav li > a",this.offsets=[],this.targets=[],this.activeTarget=null,this.scrollHeight=0,this.$scrollElement.on("scroll.scrollspy",t.proxy(this.process,this)),this.refresh(),this.process()},getScrollHeight:function(){return this.$scrollElement[0].scrollHeight||Math.max(this.$body[0].scrollHeight,document.documentElement.scrollHeight)},refresh:function(){var e=this,s="offset",l=0;this.offsets=[],this.targets=[],this.scrollHeight=this.getScrollHeight(),t.isWindow(this.$scrollElement[0])||(s="position",l=this.$scrollElement.scrollTop()),this.$body.find(this.selector).map(function(){var t=i(this),e=t.data("target")||t.attr("href"),o=/^#./.test(e)&&i(e);return o&&o.length&&o.is(":visible")&&[[o[s]().top+l,e]]||null}).sort(function(t,e){return t[0]-e[0]}).each(function(){e.offsets.push(this[0]),e.targets.push(this[1])})},process:function(){var t,e=this.$scrollElement.scrollTop()+this.options.offset,s=this.getScrollHeight(),l=this.options.offset+s-this.$scrollElement.height(),o=this.offsets,i=this.targets,r=this.activeTarget;if(this.scrollHeight!=s&&this.refresh(),e>=l)return r!=(t=i[i.length-1])&&this.activate(t);if(r&&e<o[0])return this.activeTarget=null,this.clear();for(t=o.length;t--;)r!=i[t]&&e>=o[t]&&(void 0===o[t+1]||e<o[t+1])&&this.activate(i[t])},activate:function(t){this.activeTarget=t,this.clear();var e=this.selector+'[data-target="'+t+'"],'+this.selector+'[href="'+t+'"]',s=i(e).parents("li").addClass("active");s.parent(".dropdown-menu").length&&(s=s.closest("li.dropdown").addClass("active")),s.trigger("activate.scrollspy")},clear:function(){i(this.selector).parentsUntil(this.options.target,".active").removeClass("active")}});return r.register(a),n.ScrollSpy=a}),t("skylark-domx-plugins-scrolls/main",["./scrolls","./affix","./auto-scroll","./infinite-scroll","./scrolling-element","./scroll-spy"],function(t){return t}),t("skylark-domx-plugins-scrolls",["skylark-domx-plugins-scrolls/main"],function(t){return t})}(s),!l){var r=require("skylark-langx-ns");o?module.exports=r:e.skylarkjs=r}}(0,this);
//# sourceMappingURL=sourcemaps/skylark-domx-plugins-scrolls.js.map
